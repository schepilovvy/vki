# VKI-Next - Система управления учебным процессом

Веб-приложение для автоматизации управления учебным процессом в образовательном учреждении с разделением прав доступа по ролям пользователей.

## Описание

VKI-Next — это полнофункциональная система управления учебным процессом, разработанная на современном стеке технологий. Приложение предоставляет различные интерфейсы для администраторов, преподавателей и студентов, позволяя эффективно управлять группами, студентами, дисциплинами, оценками и домашними заданиями.

### Основные характеристики

**Технологический стек:**
- **Frontend:** Next.js 15.5.2 (App Router), React 19.1.0, TypeScript
- **Стилизация:** SCSS (модульные стили)
- **Управление состоянием:** TanStack Query (React Query) 5.87.1
- **Backend:** Next.js API Routes
- **База данных:** SQLite с TypeORM 0.3.27
- **Аутентификация:** JWT (jsonwebtoken) + bcryptjs
- **Формы:** React Hook Form

### Функциональность

**Система ролей:**
1. **Администратор** — полный доступ к управлению системой
2. **Преподаватель** — управление дисциплинами, оценками, домашними заданиями, кураторство групп
3. **Студент** — просмотр своих оценок, дисциплин, информации о группе

**Основные модули:**

1. **Управление студентами** (`/students`)
   - Просмотр списка студентов
   - Добавление/редактирование/удаление студентов
   - Поиск студентов
   - Привязка студентов к группам

2. **Управление преподавателями** (`/teachers`)
   - Просмотр списка преподавателей
   - Добавление/редактирование преподавателей
   - Назначение кураторов групп

3. **Управление группами** (`/groups`)
   - Создание и управление учебными группами
   - Привязка куратора к группе
   - Указание курса и специальности

4. **Управление дисциплинами** (`/disciplines`)
   - Создание дисциплин для групп
   - Назначение преподавателей на дисциплины
   - Привязка дисциплин к группам

5. **Система оценок** (`/grades`)
   - Выставление оценок студентам
   - Просмотр оценок по дисциплинам
   - История оценок

6. **Домашние задания** (`/homeworks`)
   - Создание домашних заданий по дисциплинам
   - Просмотр заданий студентами
   - Управление заданиями преподавателями

7. **Поиск** (`/search`)
   - Универсальный поиск по студентам, преподавателям, группам

**Режимы работы:**

- **Режим студента** (`/student`)
  - Просмотр своей группы
  - Просмотр дисциплин
  - Просмотр оценок

- **Режим преподавателя** (`/teacher`)
  - Управление кураторством
  - Управление дисциплинами
  - Выставление оценок
  - Управление домашними заданиями

### Архитектура

**Структура проекта:**
- `src/app/` — страницы и API-роуты Next.js
- `src/components/` — React-компоненты
- `src/api/` — клиентские API-функции
- `src/db/` — работа с базой данных (TypeORM)
- `src/hooks/` — кастомные хуки для работы с данными
- `src/types/` — TypeScript-интерфейсы
- `src/utils/` — вспомогательные утилиты

**Особенности реализации:**
- Server-Side Rendering (SSR) с предзагрузкой данных через TanStack Query
- Защищенные маршруты через компонент `ProtectedRoute`
- JWT-аутентификация с проверкой токена
- RESTful API с полным набором CRUD-операций
- Модульная архитектура компонентов

**База данных:**
- SQLite (файл `vki-web.db`)
- Основные сущности: Student, Teacher, Group, Discipline, Grade, Homework, User
- Связи между сущностями через внешние ключи

## Установка

1) Открыть cmd, выполнить (склонировать проект на диск С: в личную папку (на диске G: проект не развернется):
```bash
git clone https://github.com/schepilovvy/vki
```

2) Открыть в VSCode, в терминале VSCode выполнить:
```powershell
Set-ExecutionPolicy -Scope CurrentUser RemoteSigned
```

3) Установить npm пакеты:
```bash
npm i
```

4) Запустить проект:
```bash
npm run dev
```

### Открыть в браузере две вкладки

- http://localhost:3000/ - приложение
- http://localhost:3000/api/groups - API

## Конфигурация

Создать файл `.env.local` в корне проекта:
```env
# .env.local
DB="g:/vki-web/vki-web-orm.db"
NEXT_PUBLIC_API="http://localhost:3000/api/"
```

## Структура проекта

### Приложение - Frontend

- Главный шаблон (точка входа) - [src/app/layout.tsx](src/app/layout.tsx)
- Компоненты шаблона - [src/components/layout](src/components/layout)
- Страница - [src/app/groups/page.tsx](src/app/groups/page.tsx)
- Компонент - [src/components/Groups/Groups.tsx](src/components/Groups/Groups.tsx)
- Хук получения данных - [src/hooks/useGroups.ts](src/hooks/useGroups.ts)
- Получение данных из API - [src/api/groupsApi.ts](src/api/groupsApi.ts)

### API - Backend

- API возвращает список групп - [src/app/api/groups/route.ts](src/app/api/groups/route.ts)
- Запрос к БД - [src/db/groupDb.ts](src/db/groupDb.ts)
- Стартовая БД и запросы - папка `db` в корне проекта

## Работа с данными

![data](docs/pics/data.png)

## Документация

- ### [Файловый раутинг Next.js](docs/next-routing.md)
- ### [Debug - отладка, средства разработки браузера](docs/debug.md)
- ### [TanStackQuery - работа с данными в приложении](docs/tanstack-query.md)
- ### [БД SQLite](docs/db.md)
- ### [HTTP запросы](docs/http.md)
- ### [SSR - Server Side Rendering, передача состояния на клиент](docs/ssr.md)
- ### [GIT](docs/git.md)

## Ссылки

- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.
- [TanStackQuery](https://tanstack.com/query/latest) - документация по TanStack Query
- [Next.js Route Handlers](https://nextjs.org/docs/app/api-reference/file-conventions/route) - документация по API Routes
